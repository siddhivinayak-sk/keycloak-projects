FROM node:latest as node
WORKDIR app
COPY . .
RUN npm install
ARG LOCAL_PORT=3001
ARG CALLBACK_HOST=keycloak.acg-digistore.com
ARG CALLBACK_PORT=80
ARG CALLBACK_PATH=/realms/skent/protocol/openid-connect/ext/ciba/auth/callback
ARG CALLBACK_PROTOCOL=http
ARG CALLBACK_HOST_HEADER=keycloak.acg-digistore.com
ENV LOCAL_PORT ${LOCAL_PORT}
ENV CALLBACK_HOST ${CALLBACK_HOST}
ENV CALLBACK_PORT ${CALLBACK_PORT}
ENV CALLBACK_PATH ${CALLBACK_PATH}
ENV CALLBACK_PROTOCOL ${CALLBACK_PROTOCOL}
ENV CALLBACK_HOST_HEADER ${CALLBACK_HOST_HEADER}
EXPOSE ${LOCAL_PORT}
ENTRYPOINT ["npm", "start"]
